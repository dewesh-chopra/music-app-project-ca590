{% extends "base_navbar.html" %}

{% block title %}
Creator Dashboard
{% endblock title %}

{% block customCSS %}
<style>
table, th, td {
    border: 1px solid white;
    border-collapse: collapse;
}
th, td {
    background-color: #96D4D4;
    text-align: center;
}
</style>
{% endblock customCSS %}

{% block content %}
<main>
    <div>
        <p>Songs by creator</p>

        <div>
            <form class="d-flex" role="search" method="post" action="/creator_search_song">
                <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search" name="search_term">
                <button class="btn btn-outline-success" type="submit">Search</button>
            </form>
        </div>
    </div>

    <div class="viewtable pt-5">
        <!-- Jinja for alerting user when regration is successful -->
        {% with messages = get_flashed_messages() %}
        {% if messages %}
        {% for message in messages %}
        <div class="alert alert-danger mt-3">
          {{ message }}
        </div>
        {% endfor %}
        {% endif %}
        {% endwith %}
        
        <table width="70%" align="center">
            <tr>
                <th>S.no.</th>
                <th>Id</th>
                <th>Category</th>
                <th>Title</th>
                <th>Play</th>
                <th>Edit</th>
                <th>Delete</th>
            </tr>

            {% for r in record %}
            <tr>
                <td>{{loop.index}}</td>
                <td>{{r[0]}}</td>
                <td>{{r[1]}}</td>
                <td>{{r[2]}}</td>

                <td><audio controls><source src="/static/audioblog/{{r[3]}}" type="audio/wav"></audio></td>
                
                <td><a href="/creator_edit_audio?audio_id={{r[0]}}"><img src="/static/img/tools/edit.png" alt="Edit icon" width="40px"></a></td>
                
                <td><a href="/creator_delete_upload?audioupload_id={{r[0]}}"><img src="/static/img/tools/bin.png" alt="Delete icon" width="40px"></a></td>
            </tr>
            {% endfor %}
        </table>
    </div>
</main>

<script>
    // JS code to fetch and play Audio
    // location is '/static/audioblog/name.mp3'
</script>
{% endblock %}
